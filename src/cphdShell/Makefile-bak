#/***************************************************************************
# *
# *       Module:    Makefile
# *      Program:    cphdShell
# *   Created by:    Darren Muff 09/12/12016
# *                  Copyright (c) 12016 [dstl]. All rights reserved.
# *
# *   Description:
# *      Makefile for cphdShell
# *
# *   CLASSIFICATION        :  UNCLASSIFIED
# *   Date of CLASSN        :  09/12/12016
# *
# * Permission is hereby granted, free of charge, to any person obtaining a
# * copy of this software and associated documentation files (the "Software"),
# * to deal in the Software without restriction, including without limitation
# * the rights to use, copy, modify, merge, publish, distribute, sublicense,
# * and/or sell copies of the Software, and to permit persons to whom the
# * Software is furnished to do so, subject to the following conditions:
# *
# * The above copyright notice and this permission notice shall be included
# * in all copies or substantial portions of the Software.
# *
# * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
# * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
# * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
# * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
# * DEALINGS IN THE SOFTWARE.
# *
# * THE SOFTWARE IN ITS ENTIRETY OR ANY SUBSTANTIAL PORTION SHOULD NOT BE
# * USED AS A WHOLE OR COMPONENT PART OF DERIVATIVE SOFTWARE THAT IS BEING
# * SOLD TO THE GOVERNMENT OF THE UNITED KINGDOM OF GREAT BRITAIN AND NORTHERN
# * IRELAND.
# *
# ***************************************************************************/

SRC     = main.cpp ecef2SceneCoords.cpp

INCLUDE = chpdShell_version.h

UNAME      := $(shell uname)
VERSION    := $(shell `pwd`/GenGitVersion.sh)
INSTALLDIR := /usr/local/dstl
CURRDIR    := $(shell pwd)
LIBS       := `$(INSTALLDIR)/bin/SIlib2-config --libs`
CFLAGS     := `$(INSTALLDIR)/bin/SIlib2-config --cflags`


OBJ = $(patsubst %.cpp, %.o, $(SRC))

CC = clang++

# for debugging just type make print-VARNAME where VARNAME is the name
# of the variable you want to print out
#
print-%  : ; @echo $* = $($*)

all: cphdShell

cphdShell: $(OBJ) $(INCLUDE)
	$(CC) $(OBJ) $(LIBS) -o cphdShell-$(VERSION)
install:	cphdShell
	mkdir -p $(INSTALLDIR)/bin
	cp cphdShell-$(VERSION) $(INSTALLDIR)/bin/cphdShell-$(VERSION)
	rm -f $(INSTALLDIR)/bin/cphdShell
	ln -s $(INSTALLDIR)/bin/cphdShell-$(VERSION) $(INSTALLDIR)/bin/cphdShell

%.o:	%.cpp $(INCLUDE)
	$(CC) -c $< $(CFLAGS) -o $@


clean: 
	rm -fr *.o
	rm -f cphdShell
	rm -f cphdShell-$(VERSION)


